___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "IGB Tracker",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "IGB is a multi-post vacancy and programmatic jobmarketing solution. This template allows tracking of completed applications and conversion rations of vacancies on your website posted by IGB.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "trigger",
    "displayName": "Trigger",
    "radioItems": [
      {
        "value": "start",
        "displayValue": "Start"
      },
      {
        "value": "end",
        "displayValue": "Stop"
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "method",
    "displayName": "Tracking method",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "textvalue",
        "displayValue": "Textual value"
      },
      {
        "value": "url",
        "displayValue": "Page URL"
      },
      {
        "value": "referer",
        "displayValue": "Referrer URL"
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "RADIO",
    "name": "source",
    "displayName": "Tracking source",
    "radioItems": [
      {
        "value": "query",
        "displayValue": "Query string"
      },
      {
        "value": "path",
        "displayValue": "Page path"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "method",
        "paramValue": "url",
        "type": "EQUALS"
      },
      {
        "paramName": "method",
        "paramValue": "referer",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "pathVar",
    "displayName": "Regular expression",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "source",
        "paramValue": "path",
        "type": "EQUALS"
      }
    ],
    "valueHint": "/apply\\/(\\d+)-/"
  },
  {
    "type": "TEXT",
    "name": "textValue",
    "displayName": "Text value, either hard-coded or using a variable",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "method",
        "paramValue": "textvalue",
        "type": "EQUALS"
      }
    ],
    "valueHint": "MyRef001 or {{VARIABLE NAME }}",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "queryVar",
    "displayName": "Query parameter",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "source",
        "paramValue": "query",
        "type": "EQUALS"
      }
    ],
    "valueHint": "vacancyID"
  },
  {
    "type": "CHECKBOX",
    "name": "debug",
    "checkboxText": "Log debug messages to console",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const logToConsole = require('logToConsole');
const callInWindow = require('callInWindow');
const queryPermission = require('queryPermission');

const log = data.debug ? logToConsole : (() => {});


const trackerUrl = 'https://beheer.ingoedebanen.nl/js/tracker.js';

const getValueFromUrl = (functionPrefix) => {
  let functionName;
  let argument;
  switch (data.source) {
    case 'query':
      functionName = functionPrefix + 'Var';
      argument = data.queryVar;
      break;
    case 'path':
      functionName = functionPrefix + 'UrlVar';
      argument = data.pathVar;
      break;
    default:
      log('Invalid tracking source: ' + data.source);
      data.gtmOnFailure();      

  }
  
  if (queryPermission('access_globals', 'execute', functionName)) {
    return callInWindow(functionName, argument);
  } else {
    log('Not allowed to call the method ' + functionName);
    data.gtmOnFailure();
    return;
  }
};

const onSuccess = () => {
  log('IGB Tracker: script loaded successfully.');
  
  const trigger = 'InGoedeBanenTracker.' + data.trigger;
  let reference;
  switch (data.method) {
    case 'textvalue':
      reference = data.textValue;
      break;
    case 'url':
      reference = getValueFromUrl('InGoedeBanenTracker.get');
      break;
    case 'referer':
      reference = getValueFromUrl('InGoedeBanenTracker.getRefered');
      break;
    default:
      log('Invalid tracking method: ' + data.method);
      data.gtmOnFailure();
      return;
  }

  if (typeof reference === 'undefined' || reference.trim() === '') {
      log('No reference');
      data.gtmOnFailure();
      return;
  }
  if (queryPermission('access_globals', 'execute', trigger)) {
    callInWindow(trigger, reference);
  } else {
    log('Not allowed to call the method ' + trigger);
    data.gtmOnFailure();
    return;
  }

  data.gtmOnSuccess();
};

const onFailure = () => {
  log('IGB Tracker: script load failed.');
  data.gtmOnFailure();
};

if (queryPermission('inject_script', trackerUrl)) {
  injectScript(trackerUrl, onSuccess, onFailure, trackerUrl);
} else {
  log('Not allowed to load ' + trackerUrl);
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://beheer.ingoedebanen.nl/js/tracker.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.start"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.end"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.getVar"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.getReferedVar"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.getUrlVar"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "InGoedeBanenTracker.getReferedUrlVar"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Tracker start is called with fixed value
  code: |-
    const mockData = {
      method: 'textvalue',
      textValue: 'Fixed value',
      trigger: 'start'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.start', 'Fixed value');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker end is called with fixed value
  code: |-
    const mockData = {
      method: 'textvalue',
      textValue: 'Fixed value',
      trigger: 'end'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.end', 'Fixed value');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker start is called with query value from URL
  code: |-
    const mockData = {
      method: 'url',
      source: 'query',
      trigger: 'start',
      queryVar: 'queryVariableForStart',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getVar', 'queryVariableForStart');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.start', 'Query value from URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker end is called with query value from URL
  code: |-
    const mockData = {
      method: 'url',
      source: 'query',
      trigger: 'end',
      queryVar: 'queryVariableForEnd',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getVar', 'queryVariableForEnd');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.end', 'Query value from URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker start is called with query value from referer URL
  code: |-
    const mockData = {
      method: 'referer',
      source: 'query',
      trigger: 'start',
      queryVar: 'queryVariableForReferedStart',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getReferedVar', 'queryVariableForReferedStart');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.start', 'Query value from referer URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker end is called with query value from referer URL
  code: |-
    const mockData = {
      method: 'referer',
      source: 'query',
      trigger: 'end',
      queryVar: 'queryVariableForRefererEnd',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getReferedVar', 'queryVariableForRefererEnd');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.end', 'Query value from referer URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker start is called with path value from URL
  code: |
    const mockData = {
      method: 'url',
      source: 'path',
      trigger: 'start',
      pathVar: 'pathVariableForStart',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getUrlVar', 'pathVariableForStart');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.start', 'Path value from URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker end is called with path value from URL
  code: |
    const mockData = {
      method: 'url',
      source: 'path',
      trigger: 'end',
      pathVar: 'pathVariableForEnd',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getUrlVar', 'pathVariableForEnd');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.end', 'Path value from URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker start is called with path value from referer URL
  code: |
    const mockData = {
      method: 'referer',
      source: 'path',
      trigger: 'start',
      pathVar: 'pathVariableForRefererStart',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getReferedUrlVar', 'pathVariableForRefererStart');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.start', 'Path value from referer URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Tracker end is called with path value from referer URL
  code: |
    const mockData = {
      method: 'referer',
      source: 'path',
      trigger: 'end',
      pathVar: 'pathVariableForRefererEnd',
    };

    // Call runCode to run the template's code.
    runCode(mockData);
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.getReferedUrlVar', 'pathVariableForRefererEnd');
    assertApi('callInWindow').wasCalledWith('InGoedeBanenTracker.end', 'Path value from referer URL');
    assertApi('gtmOnSuccess').wasCalled();
- name: Invalid trigger is not allowed
  code: |-
    const mockData = {
      method: 'textvalue',
      textvalue: 'Fixed value',
      trigger: 'invalid'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Invalid method is not allowed
  code: |
    const mockData = {
      method: 'invalidMethod',
      trigger: 'start',
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Invalid source is not allowed
  code: |-
    const mockData = {
      method: 'referer',
      source: 'invalidSource',
      trigger: 'start',
      pathVar: 'pathVariableForRefererEnd',
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: An empty reference is not tracked
  code: |-
    const mockData = {
      method: 'textvalue',
      textValue: '',
      trigger: 'start'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: A non existing reference is not tracked
  code: |-
    const mockData = {
      method: 'textvalue',
      trigger: 'start'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('callInWindow').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: Logging to console when enabled
  code: |-
    mock('logToConsole', (message) => {});

    const mockData = {
      method: 'textvalue',
      textValue: 'Fixed value',
      trigger: 'start',
      debug: true
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('logToConsole').wasCalled();
- name: No log to console when not enabled
  code: |-
    mock('logToConsole', (message) => {});

    const mockData = {
      method: 'textvalue',
      textValue: 'Fixed value',
      trigger: 'start',
      debug: false
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertApi('logToConsole').wasNotCalled();
setup: |-
  const trackerUrl = 'https://beheer.ingoedebanen.nl/js/tracker.js';

  let success, failure;

  mock('injectScript', (url, s, f) => {
    success = s;
    failure = f;
    s();
  });

  mock('callInWindow', (code, argument) => {
    switch (code) {
      case 'InGoedeBanenTracker.getVar':
        return 'Query value from URL';
      case 'InGoedeBanenTracker.getUrlVar':
        return 'Path value from URL';
      case 'InGoedeBanenTracker.getReferedVar':
        return 'Query value from referer URL';
      case 'InGoedeBanenTracker.getReferedUrlVar':
        return 'Path value from referer URL';
    }
  });


___NOTES___

https://www.simoahava.com/analytics/custom-templates-guide-for-google-tag-manager/

https://www.simoahava.com/analytics/create-facebook-pixel-custom-tag-template/


